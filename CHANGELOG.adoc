// SPDX-License-Identifier: AGPL-3.0-or-later
= Changelog

All notable changes to the HINFO-LOC Fluctuator project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

== [Unreleased]

=== Added
- RSR (Rhodium Standard Repository) compliance framework
- `.well-known/` directory with RFC 9116 security.txt, ai.txt, humans.txt
- Comprehensive governance documents (SECURITY.md, CONTRIBUTING.md, CODE_OF_CONDUCT.md, MAINTAINERS.md)
- TPCF (Tri-Perimeter Contribution Framework) documentation
- justfile for modern build automation
- Dual licensing (MIT + Palimpsest v0.8)
- RSR compliance self-verification script

=== Changed
- Updated documentation to reflect Silver Tier RSR compliance (77%)

== [2.0.0] - 2025-11-22

=== Added - Enterprise Features

**Extended DNS Records** (~500 lines)
- Support for 20+ DNS record types (A, AAAA, MX, NS, CNAME, PTR, TXT, SPF, DKIM, DMARC, CAA, TLSA, SSHFP, APL, SRV, NAPTR, DS, DNSKEY, NSEC, NSEC3)
- IPv4/IPv6 address parsing and conversion
- Zone file format generation for all record types
- APL record CIDR matching for IP-based access control
- DNS topology modes (Standard, Split-Horizon, Primary-Primary, Hidden-Primary)
- AXFR configuration for zone transfers

**Firewall Management** (~460 lines)
- Dynamic port rotation with time-based algorithm
  - Algorithm: `port = base_port + (unix_timestamp / interval) % range`
  - Maintainers can calculate current port offline
- Service scheduling with time windows (MX, RSS, NNTP)
- Support for 4 firewall backends (firewalld, iptables, nftables, pf)
- Maintenance window tracking and enforcement
- Port knocking setup
- IPv4/IPv6 protocol mode control
- Emergency lockdown and recovery operations

**Security Headers** (~500 lines)
- HTTP security header generation (HSTS, CSP, X-Frame-Options, Referrer-Policy, Permissions-Policy, COEP, COOP, CORP)
- Diagnostic mode - real stack visible only to authorized IPs with secret token
- Server/X-Powered-By obfuscation with randomized fake values
- CSP nonce generation for inline scripts
- Web server configuration generation (nginx, Apache, PHP)
- HINFO record synchronization for consistent fake stacks
- All experimental security headers

**Zero-Trust SDP** (~470 lines)
- Software-Defined Perimeter architecture (NIST SP 800-207 compliant)
- Single Packet Authorization (SPA) processing framework
- Multi-factor authentication support
- Device posture validation (OS version, antivirus, firewall, encryption, patch level)
- Session management with continuous verification and re-authentication
- Policy evaluation and enforcement
- Micro-segmentation for network isolation
- Security event logging

**Protocol Management** (~450 lines)
- SNMP v1/v2c/v3 support with security warnings for insecure versions
- NETCONF server implementation (RFC 6241, recommended over SNMP)
- RESTCONF RESTful API support (RFC 8040)
- gNMI modern gRPC-based protocol (recommended)
- Prometheus/OpenMetrics metrics export
- Security validation and protocol recommendations
- Firewall and SDP integration

**Master Configuration** (~450 lines)
- 5 deployment profiles (Development, Staging, Production, Honeypot, Research)
- Configuration validation with comprehensive security checks
- Security posture reporting
- Configuration file operations (INI, YAML, JSON export)
- Hot reload - apply configuration changes without restart
- Migration from legacy config format
- Configuration comparison and diff generation
- Emergency configurations (lockdown, recovery, minimal safe modes)

=== Added - Documentation

- `ENTERPRISE_FEATURES.md` - Comprehensive enterprise feature guide (350+ lines)
- `examples/production_config.yaml` - Production configuration example (310 lines)
- `PROJECT_SUMMARY.md` - Complete project transformation summary
- Updated `CLAUDE.md` with implementation status
- Updated root `README.md` with enterprise features overview

=== Changed

- Project evolved from basic HINFO/LOC fluctuation to full enterprise DNS security platform
- Total codebase: 2,000 → 16,000+ lines
- Core modules: 6 → 20 (14 new modules)

== [1.0.0] - 2025-11 (Previous Work)

=== Added - Core Features

**Type-Safe DNS Records** (~140 lines)
- HINFO record support (CPU, OS)
- LOC record support (latitude, longitude, altitude)
- Compile-time bounds checking for all geographic coordinates
- DNS classes (IN, CH, HS)
- TTL range constraints (1-604800 seconds)

**Authentication Module** (~110 lines)
- Permission levels (None, Read-Only, Modify-Local, Modify-Remote, Admin)
- Session timeout (30 minutes default)
- Constant-time password comparison (timing attack prevention)
- Replay attack detection (nonce-based)

**Randomization Engine** (~200 lines)
- CSV parser for location data
- Random selection from data pools
- Configurable randomization intervals

**Text User Interface** (~350 lines)
- Interactive menu system
- ANSI color support
- Permission-based menu filtering
- Login screen

**Zone File Writer** (~180 lines)
- BIND-format zone file generation
- SOA record generation
- RFC 1912 serial format (YYYYMMDDnn)
- Atomic file writes

**Logger** (~150 lines)
- Thread-safe audit logging
- Protected types for concurrent access
- Structured log entries

**Scheduler** (~150 lines)
- Scheduled auto-fluctuation with Ada tasking
- Start/Stop/Pause/Resume control
- Configurable intervals

**DNS UPDATE Framework** (~120 lines)
- RFC 2136 dynamic update framework
- TSIG authentication specification (needs crypto library)

=== Added - Data Files

- `machines.txt` - 68 CPU types (Intel, AMD, ARM, historical, fictional)
- `operating_systems.txt` - 77 operating systems (Linux, BSD, Windows, historical, fictional)
- `locations.csv` - 52 geographic locations (data centers, exotic locations)

=== Added - Build System

- GNAT project file (`hinfo_loc_fluctuator.gpr`)
- Makefile with debug, release, prove targets
- Security flags always enabled (`-gnoto`, `-fstack-check`, `-gnatVa`)
- SPARK verification mode

=== Added - Documentation

- `README.md` - Main project documentation (450+ lines)
- `USE_CASES.md` - 6 detailed scenarios (honeypot, incident response, security research, privacy, testing, quantum server)
- `CLAUDE.md` - Project context for AI sessions

== [0.1.0] - 2025-11-Earlier (Initial Prototype)

=== Added

- Elixir prototype (reference implementation, not recommended for production)
- Basic HINFO/LOC fluctuation concept
- Proof of concept for DNS record randomization

---

== Upcoming Releases

=== [2.1.0] - Planned (Q1 2026)

**Focus**: Testing & Integration

- Unit test framework (target: 70%+ coverage)
- Integration tests with mock DNS server
- CI/CD pipeline (.gitlab-ci.yml)
- Nix reproducible builds (flake.nix)
- RSR self-verification
- Gold Tier RSR compliance (86%+)

=== [2.2.0] - Planned (Q2 2026)

**Focus**: Production Hardening

- Real cryptographic hashing (bcrypt/Argon2)
- TSIG authentication with crypto library
- SPA packet encryption/decryption
- Real DNS server integration testing (BIND, PowerDNS, NSD)
- Actual firewall command execution (tested and hardened)

=== [3.0.0] - Planned (Q3 2026)

**Focus**: Formal Verification

- SPARK annotations on security-critical modules
- Formal verification of `secure_auth.ads`
- Formal verification of `sdp_controller.ads`
- Mathematical proof of correctness
- Platinum Tier RSR compliance (90%+)

---

== Version Numbering

We use [Semantic Versioning](https://semver.org/):

- **MAJOR**: Incompatible API changes, breaking changes
- **MINOR**: New features, backward-compatible
- **PATCH**: Bug fixes, backward-compatible

**Special Tags**:
- `-alpha`: Early development, unstable
- `-beta`: Feature complete, testing phase
- `-rc1`, `-rc2`: Release candidates

---

== Links

- **Repository**: https://github.com/Hyperpolymath/resource-record-fluctuator
- **Releases**: https://github.com/Hyperpolymath/resource-record-fluctuator/releases
- **Issues**: https://github.com/Hyperpolymath/resource-record-fluctuator/issues
- **Security**: See [SECURITY.md](SECURITY.md)

---

**Maintained by**: See [MAINTAINERS.md](MAINTAINERS.md)
**License**: MIT + Palimpsest v0.8 (see [LICENSE](LICENSE))
